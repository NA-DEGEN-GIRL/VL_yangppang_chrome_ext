<!DOCTYPE html>
<html>
<head>
    <title>Hedge Trader</title>
    <style>
        body { font-family: sans-serif; width: 320px; padding: 8px; }
        .input-group, .button-group { margin-bottom: 8px; }
        label { display: block; margin-bottom: 4px; font-weight: bold; }
        input[type="text"], input[type="number"], select { width: 100%; padding: 4px; box-sizing: border-box; }
        button { width: 100%; padding: 6px; margin-top: 4px; cursor: pointer; }
        .button-group { display: flex; gap: 4px; }
        hr { border: 0; border-top: 1px solid #ccc; margin: 10px 0; }
        
        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10px;
            font-size: 12px;
        }
        .info-table th, .info-table td {
            border: 1px solid #ddd;
            padding: 4px;
            text-align: right;
        }
        .info-table th { background-color: #f2f2f2; text-align: center; }
        .info-table td:first-child { text-align: left; font-weight: bold; }
        #balance-table .total-row td { font-weight: bold; }
        
        /* 오더북 자동 업데이트 섹션 스타일 */
        .orderbook-section {
            border: 1px solid #ddd;
            padding: 6px;
            border-radius: 4px;
            background-color: #f9f9f9;
        }
        .auto-update-row {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 4px;
        }
        .auto-update-row input {
            width: 60px;
        }
        #autoUpdateToggle {
            background-color: #4CAF50;
            color: white;
            padding: 4px 8px;
            font-size: 12px;
        }
        #autoUpdateToggle.active {
            background-color: #f44336;
        }
    </style>
</head>
<body>
    <div class="input-group">
        <label for="coinSymbol">Coin Symbol (e.g., ETH, SOL):</label>
        <div class="button-group">
            <input type="text" id="coinSymbol" placeholder="BTC">
            <button id="setCoinBtn">Set</button>
        </div>
    </div>

    <!-- 포지션 테이블 -->
    <table id="position-table" class="info-table">
        <thead>
            <tr>
                <th>Exchange</th>
                <th>Size</th>
                <th>PnL</th>
                <th>Funding</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Lighter</td>
                <td id="lighter-size">0.0000</td>
                <td id="lighter-pnl">0.0</td>
                <td id="lighter-funding">0.0</td>
            </tr>
            <tr>
                <td>Variational</td>
                <td id="variational-size">0.0000</td>
                <td id="variational-pnl">0.0</td>
                <td id="variational-funding">0.0</td>
            </tr>
        </tbody>
    </table>

    <!-- Balance 테이블 -->
    <table id="balance-table" class="info-table">
        <thead>
            <tr>
                <th>Exchange</th>
                <th>Balance</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Lighter</td>
                <td id="lighter-balance">$0.00</td>
            </tr>
            <tr>
                <td>Variational</td>
                <td id="variational-balance">$0.00</td>
            </tr>
            <tr class="total-row">
                <td>Total Balance</td>
                <td id="total-balance">$0.00</td>
            </tr>
        </tbody>
    </table>

    <hr>

    <div class="input-group">
        <label for="quantity">Quantity:</label>
        <input type="text" id="quantity" placeholder="0.001">
    </div>

    <div class="button-group">
        <button id="lBuyVSell">L-Buy, V-Sell</button>
        <button id="lSellVBuy">L-Sell, V-Buy</button>
    </div>

    <!-- 오더북 섹션 (수정됨) -->
    <div class="orderbook-section">
        <div class="input-group" style="margin-bottom: 4px;">
            <label for="orderbookIndex">Lighter Orderbook (X = Off):</label>
            <select id="orderbookIndex">
                <option value="X">X (Off)</option>
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
            </select>
        </div>
        
        <!-- 자동 업데이트 컨트롤 (추가됨) -->
        <div class="auto-update-row">
            <span style="font-size: 12px;">Auto-refresh:</span>
            <input type="number" id="refreshInterval" min="100" max="5000" value="200" step="100">
            <span style="font-size: 12px;">ms</span>
            <button id="autoUpdateToggle">Start</button>
        </div>
    </div>

    <button id="submitOrder" style="margin-top: 8px;">Submit ALL Orders</button>

    <div class="button-group">
        <button id="submitLighter">Submit L</button>
        <button id="submitVariational">Submit V</button>
    </div>

    <script src="popup.js"></script>
</body>
</html>